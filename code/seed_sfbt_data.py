from datetime import datetime, timezone
from code.db_models import SessionLocal, SFBTKnowledge


def seed_knowledge():
	entry = SFBTKnowledge(
		title="焦点解决短程治疗简介",
		source_url="https://example.com/sfbt_intro",
		content=(
			'''
			焦点解决短期治疗（SFBT）是一种以目标为导向、注重资源发掘的心理干预方法，其核心步骤包括目标设定、寻找例外、构建解决方案、反馈与评估、巩固成果。以下为具体流程及操作要点：
步骤一：设定明确目标
治疗师通过提问引导来访者清晰描述具体、可衡量、可实现的目标，例如：“如果问题解决了，你的生活会有哪些不同？”常用“奇迹式提问”帮助来访者想象理想状态，将模糊诉求转化为行动导向的解决方案。例如：“假设今晚睡觉时奇迹发生，问题消失了，你明天会注意到哪些变化？”
步骤二：探索例外情境
聚焦于问题未发生或程度减轻的时刻，引导来访者识别自身应对问题的潜在能力。例如：“过去一周是否有某个瞬间，你感觉问题没那么严重？当时你做了什么？”通过分析例外情境中的有效策略（如沟通方式、情绪调节），帮助来访者意识到自身资源，增强解决问题的信心。
步骤三：构建解决方案
基于目标与例外经验，与来访者共同设计可操作的行动计划。治疗师使用“评分问句”（如“从0到10分，你现在对解决问题的信心有几分？”）量化进展，并探讨提升1分所需的具体行动。例如，若来访者信心评分为4分，可询问：“哪些小改变能让你的信心达到5分？”
步骤四：提供反馈与评估
每次会谈结束时，治疗师总结来访者的优势、进展及下一步建议，强调正向变化。例如：“你提到上周主动与家人沟通了三次，这显示你已经在尝试新方法。”同时通过定期评估目标达成度（如“距离目标还有多远？”），灵活调整干预策略。
步骤五：巩固成果并结束治疗
当来访者实现目标或具备持续改善的能力时，逐步减少会谈频率，并通过复盘成功经验强化其自我效能感。例如：“回顾这段时间，哪些做法对你最有效？未来遇到类似挑战时，你打算如何运用这些经验？”治疗师可邀请来访者预测未来可能的障碍，并提前制定应对策略。
注意事项
以资源为导向：避免过度分析问题成因，转而关注来访者的优势与潜在能力。1.
强调合作性：治疗师以“未知者”姿态提问，而非指导者，尊重来访者的主导权。2.
短程化设计：通常为4-8次会谈，每次聚焦于具体行动而非长期探索。3.
通过上述步骤，SFBT帮助来访者在较短时间内实现认知与行为的积极转变，适用于解决人际关系、学业职场压力等现实问题。其核心理念在于：“小改变引发大不同”，通过积累微小进展推动整体改善。
		'''
		   ),
		last_update=datetime.now(timezone.utc),
	)
	session = SessionLocal()
	session.add(entry)
	session.commit()
	session.close()


if __name__ == "__main__":
	seed_knowledge()
	print("知识库种子数据写入完成")